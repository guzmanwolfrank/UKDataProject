
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data File Comparison Report</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/2.24.2/plotly.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .chart-container {
            width: 100%;
            min-height: 300px;
            margin: 1rem 0;
        }
        .card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin: 16px 0;
            padding: 16px;
        }
        @media (max-width: 768px) {
            .chart-container {
                height: 300px;
            }
        }
    </style>
</head>
<body class="bg-gray-100">
    <div class="container mx-auto px-4 py-8 max-w-7xl">
        <div class="text-center mb-8">
            <h1 class="text-3xl font-bold text-gray-800 mb-2">Data File Comparison Report</h1>
            <p class="text-gray-600">Generated on <span id="timestamp"></span></p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <div class="card">
                <h2 class="text-xl font-semibold mb-4">File Information</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="p-4 bg-gray-50 rounded">
                        <h3 class="font-medium text-blue-600">File 1:</h3>
                        <p class="text-sm text-gray-600 break-all">C:\Users\Wolfrank\Desktop\GiGabyte\CodeWolf\UKDataProject\Data\Combined_Data\combined_accidents.csv</p>
                        <p class="mt-2">Rows: 529294</p>
                        <p>Columns: 33</p>
                    </div>
                    <div class="p-4 bg-gray-50 rounded">
                        <h3 class="font-medium text-blue-600">File 2:</h3>
                        <p class="text-sm text-gray-600 break-all">C:\Users\Wolfrank\Desktop\GiGabyte\CodeWolf\UKDataProject\Data\Combined_Data\combined_casualties.csv</p>
                        <p class="mt-2">Rows: 699163</p>
                        <p>Columns: 17</p>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2 class="text-xl font-semibold mb-4">Overall Similarity</h2>
                <div id="gauge-chart" class="chart-container"></div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6">
            <div class="card">
                <h2 class="text-xl font-semibold mb-4">Row Comparison</h2>
                <div id="row-comparison-chart" class="chart-container"></div>
            </div>

            <div class="card">
                <h2 class="text-xl font-semibold mb-4">Column Distribution</h2>
                <div id="column-comparison-chart" class="chart-container"></div>
            </div>
        </div>

        <div class="card mt-6">
            <h2 class="text-xl font-semibold mb-4">Column-wise Similarity</h2>
            <div id="bar-chart" class="chart-container h-[500px]"></div>
        </div>

        
            <div class="card mt-6">
                <h2 class="text-xl font-semibold mb-4">Dataset Columns</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="font-medium text-blue-600 mb-2">File 1 Columns:</h3>
                        <div class="bg-gray-50 p-4 rounded max-h-96 overflow-y-auto">
                            <ol class="list-decimal list-inside space-y-1">
                                <li class="text-gray-700">Accident_Index</li><li class="text-gray-700">Location_Easting_OSGR</li><li class="text-gray-700">Location_Northing_OSGR</li><li class="text-gray-700">Longitude</li><li class="text-gray-700">Latitude</li><li class="text-gray-700">Police_Force</li><li class="text-gray-700">Accident_Severity</li><li class="text-gray-700">Number_of_Vehicles</li><li class="text-gray-700">Number_of_Casualties</li><li class="text-gray-700">Date</li><li class="text-gray-700">Day_of_Week</li><li class="text-gray-700">Time</li><li class="text-gray-700">Local_Authority_(District)</li><li class="text-gray-700">Local_Authority_(Highway)</li><li class="text-gray-700">1st_Road_Class</li><li class="text-gray-700">1st_Road_Number</li><li class="text-gray-700">Road_Type</li><li class="text-gray-700">Speed_limit</li><li class="text-gray-700">Junction_Detail</li><li class="text-gray-700">Junction_Control</li><li class="text-gray-700">2nd_Road_Class</li><li class="text-gray-700">2nd_Road_Number</li><li class="text-gray-700">Pedestrian_Crossing-Human_Control</li><li class="text-gray-700">Pedestrian_Crossing-Physical_Facilities</li><li class="text-gray-700">Light_Conditions</li><li class="text-gray-700">Weather_Conditions</li><li class="text-gray-700">Road_Surface_Conditions</li><li class="text-gray-700">Special_Conditions_at_Site</li><li class="text-gray-700">Carriageway_Hazards</li><li class="text-gray-700">Urban_or_Rural_Area</li><li class="text-gray-700">Did_Police_Officer_Attend_Scene_of_Accident</li><li class="text-gray-700">LSOA_of_Accident_Location</li><li class="text-gray-700">Source_File</li>
                            </ol>
                        </div>
                    </div>
                    <div>
                        <h3 class="font-medium text-blue-600 mb-2">File 2 Columns:</h3>
                        <div class="bg-gray-50 p-4 rounded max-h-96 overflow-y-auto">
                            <ol class="list-decimal list-inside space-y-1">
                                <li class="text-gray-700">Accident_Index</li><li class="text-gray-700">Vehicle_Reference</li><li class="text-gray-700">Casualty_Reference</li><li class="text-gray-700">Casualty_Class</li><li class="text-gray-700">Sex_of_Casualty</li><li class="text-gray-700">Age_of_Casualty</li><li class="text-gray-700">Age_Band_of_Casualty</li><li class="text-gray-700">Casualty_Severity</li><li class="text-gray-700">Pedestrian_Location</li><li class="text-gray-700">Pedestrian_Movement</li><li class="text-gray-700">Car_Passenger</li><li class="text-gray-700">Bus_or_Coach_Passenger</li><li class="text-gray-700">Pedestrian_Road_Maintenance_Worker</li><li class="text-gray-700">Casualty_Type</li><li class="text-gray-700">Casualty_Home_Area_Type</li><li class="text-gray-700">Casualty_IMD_Decile</li><li class="text-gray-700">Source_File</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>
        
    </div>

    <script>
        const data = {"bar_chart": {"columns": ["Source_File", "Accident_Index"], "percentages": [0.0, 1.618760084187616]}, "gauge": {"overall_similarity": 0.809380042093808}, "row_comparison": {"labels": ["File 1", "File 2"], "values": [529294, 699163]}, "column_comparison": {"labels": ["Common Columns", "Unique to File 1", "Unique to File 2"], "values": [2, 31, 15]}, "timestamp": "2024-12-17 15:54:05"};
        document.getElementById('timestamp').textContent = data.timestamp;

        const getResponsiveLayout = () => {
            return {
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)',
                margin: { t: 40, r: 30, l: 30, b: 40 },
                font: { size: window.innerWidth < 768 ? 10 : 12 }
            };
        };

        const gauge = {
            type: "indicator",
            mode: "gauge+number",
            value: data.gauge.overall_similarity,
            title: { text: "Overall Similarity %" },
            gauge: {
                axis: { range: [0, 100] },
                bar: { color: "darkblue" },
                bgcolor: "white",
                borderwidth: 2,
                bordercolor: "gray",
                steps: [
                    { range: [0, 25], color: "#ff9999" },
                    { range: [25, 50], color: "#ffcc99" },
                    { range: [50, 75], color: "#99ff99" },
                    { range: [75, 100], color: "#99ccff" }
                ]
            }
        };

        const rowComparison = {
            type: 'bar',
            x: data.row_comparison.labels,
            y: data.row_comparison.values,
            marker: {
                color: ['#4299e1', '#48bb78']
            },
            text: data.row_comparison.values.map(String),
            textposition: 'auto'
        };

        const columnComparison = {
            type: 'pie',
            labels: data.column_comparison.labels,
            values: data.column_comparison.values,
            marker: {
                colors: ['#4299e1', '#48bb78', '#ed8936']
            }
        };

        const barChart = {
            type: 'bar',
            x: data.bar_chart.columns,
            y: data.bar_chart.percentages,
            marker: {
                color: data.bar_chart.percentages.map(p => 
                    `rgb(${Math.round(255 * (100 - p) / 100)}, ${Math.round(255 * (100 - p) / 100)}, 255)`
                )
            }
        };

        Plotly.newPlot('gauge-chart', [gauge], getResponsiveLayout());
        Plotly.newPlot('row-comparison-chart', [rowComparison], {
            ...getResponsiveLayout(),
            title: 'Number of Rows per File',
            yaxis: { title: 'Row Count' }
        });
        Plotly.newPlot('column-comparison-chart', [columnComparison], {
            ...getResponsiveLayout(),
            title: 'Column Distribution'
        });
        Plotly.newPlot('bar-chart', [barChart], {
            ...getResponsiveLayout(),
            title: 'Column Similarity Percentages',
            xaxis: { 
                title: 'Columns',
                tickangle: 45,
                automargin: true
            },
            yaxis: { 
                title: 'Similarity %',
                range: [0, 100]
            }
        });.
    </script>
</body>
</html>
        